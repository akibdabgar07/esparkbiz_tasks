<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
</head>

<body onload="highlight()">
    <form action="http://localhost:<%=port %>/">
        <input type="hidden" name="offset" value="<%=akib_i%>" />
        <label>Enter value for show data</label>
        <input type="number" name="limit" id="limit_change"
            max="<%=parseInt(results1[0])['COUNT(student_express_id)']%>" min="1" required />
        <input type="submit" value="submit" />

    </form>


    <script>

        function highlight() {
            let offset_value =<%=akib_i%>;
            let pageLength = (offset_value / parseInt(<%=limit %>)) + 1;
            document.getElementById('page' + pageLength).style.backgroundColor = "red";
        }

        let i = <%= akib_i%>;

        function next() {
            document.getElementById('offset').setAttribute('value', i);
            if (i <(1500-<%=limit%>)) {

                if ((window.location.href).includes('/?offset=' + i + '&limit=')) {
                    let newdata = window.location.href.replaceAll("/?offset=" + i + "&limit=" +<%=limit %>, "/?offset=" + (i += <%=limit %>) + "&limit=" +<%=limit%>);
                    window.location.replace(newdata);
                }
                else {
                    window.location.replace(window.location.href + "?offset=" + (i +=<%=limit %>) + "&limit=" +<%=limit %>);
                }
            }
            else {
                window.location.replace(window.location.href);
            }

        }

        function pre() {
            document.getElementById('offset').setAttribute('value', i);
            console.log(i);

            if ((i-<%=limit%>)>=0 {
                if ((window.location.href).includes('/?offset=')) {
                    let newdata = window.location.href.replaceAll("/?offset=" + i, "/?offset=" + (i -= <%=limit %>));
                    // window.location.replace(window.location.href+""+i);
                    window.location.replace(newdata);
                }
                else {
                    window.location.replace(window.location.href + "?offset=" + (i -= <%=limit %>));
                }
            }
            else {
                window.location.replace(window.location.href);
            }
        }

    </script>
    <div class="table-data">
            <% let old_sort=akib_sort%>
        <table class="data" align="center" border="1">
            <tr>
                <th><a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=student_express_id&old_sort=<%=old_sort%>">Student Id</a>  </th>
                <th> <a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=fname&old_sort=<%=old_sort%>">First Name</a> </th>
                <th><a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=lname&old_sort=<%=old_sort%>">Last Name</a></th>
                <th><a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=contact&old_sort=<%=old_sort%>">Contact</a></th>
                <th><a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=email&old_sort=<%=old_sort%>">email</a></th>
                <th><a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=city&old_sort=<%=old_sort%>">city</a></th>
                <th><a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=college_id&old_sort=<%=old_sort%>">college id</a></th>
                <th><a href="http://localhost:<%=port%>/?offset=0&limit=<%=limit%>&sort=created_date&old_sort=<%=old_sort%>">created date</a></th>

            </tr>
            <% for(var i=0; i < data.length; i++) { %>
                <tr>
                    <td>
                        <%= data[i]["student_express_id"] %>
                    </td>
                    <td>
                        <%= data[i]["fname"] %>
                    </td>
                    <td>
                        <%= data[i]["lname"] %>
                    </td>
                    <td>
                        <%= data[i]["contact"] %>
                    </td>
                    <td>
                        <%= data[i]["email"] %>
                    </td>
                    <td>
                        <%= data[i]["city"] %>
                    </td>
                    <td>
                        <%= data[i]["college_id"] %>
                    </td>
                    <td>
                        <%= data[i]["created_date"] %>
                    </td>
                </tr>
                <% } %>
        </table>



        <div style="text-align: center;">
            <input type="hidden" name="offset" id="offset" value="" />
            <input type="button" onclick="pre()" id="pre" value="previous" />

            <% i=0; for(let j=1;j<=results1[0]['COUNT(student_express_id)']/limit;j++){%>
                <a href="http://localhost:<%=port%>/?offset=<%=i%>&limit=<%=limit%>&sort=<%=akib_dup_sort%>&old_sort=<%=dsc_sort%>" id="page<%=j%>">
                    <%=j%>
                </a>
                <% i=i+parseInt(limit)%>
                    <% }%>

                        <input type="button" onclick="next()" id="next1" value="Next" />
        </div>

    </div>
</body>

</html>