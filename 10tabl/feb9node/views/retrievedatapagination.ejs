<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
</head>

<body>
    <form action="http://localhost:<%=port %>/">
        <input type="hidden" name="offset" value="<%=akib_i%>"/>
        <label>Enter value for show data</label>
        <input type="number" name="limit" id="limit_change" max="<%=parseInt(results1[0])['COUNT(student_express_id)']%>" min="1" required/>
        <input type="submit" value="submit" name="submit"/>

    </form>
    <script>
        let i = <%= akib_i%>;
        function next(){
            document.getElementById('offset').setAttribute('value',i);

            if((window.location.href).includes('/?offset='+i+'&limit=')){
                    let newdata=window.location.href.replaceAll("/?offset=" + i+"&limit="+<%=limit%>, "/?offset=" + (i += <%=limit%>)+"&limit="+<%=limit%>);
                    window.location.replace(newdata);
            }
            else{
                window.location.replace(window.location.href + "?offset=" +(i+=<%=limit%>)+"&limit="+<%=limit%>);
            }
        } 

        function pre() {
            document.getElementById('offset').setAttribute('value', i);
            console.log(i);

            if (i >= 10) {
                if ((window.location.href).includes('/?offset=')) {
                    let newdata = window.location.href.replaceAll("/?offset=" + i, "/?offset=" + (i -= <%=limit%>));
                    // window.location.replace(window.location.href+""+i);
                    window.location.replace(newdata);
                }
                else {
                    window.location.replace(window.location.href + "?offset=" + (i -= <%=limit%>));
                }
            }
            else
            {
                window.location.replace(window.location.href);
            }
        }

    </script>
    <div class="table-data">
       
        <table class="data" align="center" border="1">
            <tr>
                <th>Student Id</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Contact</th>
                <th>email</th>
                <th>city</th>
                <th>college id</th>
                <th>created date</th>

            </tr>
            <% for(var i=0; i < data.length; i++) { %>
                <tr>
                <td><%= data[i]["student_express_id"] %></td>
                <td><%= data[i]["fname"] %></td>
                <td><%= data[i]["lname"] %></td>
                <td><%= data[i]["contact"] %></td>
                <td><%= data[i]["email"] %></td>
                <td><%= data[i]["city"] %></td>
                <td><%= data[i]["college_id"] %></td>
                <td><%= data[i]["created_date"] %></td>
                </tr>
                <% } %>
        </table>
           
            

        <div style="text-align: center;">
            <input type="hidden" name="offset" id="offset" value=""/>
            <input type="button" onclick="pre()" id="pre" value="previous" />

            <% i=0;
            for(let j=1;j<=results1[0]['COUNT(student_express_id)']/limit;j++){%>
            <a href="http://localhost:<%=port%>/?offset=<%=i%>&limit=<%=limit%>"> <%=j%></a>
            <% i=i+parseInt(limit)%>
            <%
            }%>

            <input type="button" onclick="next()" id="next1" value="Next"/>
        </div>

    </div>
</body>

</html>

